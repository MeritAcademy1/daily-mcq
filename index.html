<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Merit Academy MCQ Test</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #f4f8ff;
  text-align: center;
}

header {
  background: #0b3c5d;
  color: white;
  padding: 12px;
  font-size: 20px;
  font-weight: bold;
}

.container {
  padding: 20px;
  max-width: 600px;
  margin: auto;
}

button {
  padding: 12px 20px;
  font-size: 16px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.start-btn {
  background: #0b3c5d;
  color: white;
  width: 100%;
  margin-top: 15px;
}

.option {
  background: #eee;
  padding: 12px;
  margin: 10px 0;
  border-radius: 6px;
  cursor: pointer;
}

.correct { background: #b6f5c3 !important; }
.wrong { background: #f7b2b2 !important; }

.hidden { display: none; }

#timer {
  font-weight: bold;
  margin-bottom: 10px;
}

textarea {
  width: 100%;
  height: 200px;
}

.admin-btn {
  margin-top: 20px;
  background: black;
  color: white;
  width: 100%;
}
</style>
</head>

<body>

<header>Merit Academy</header>

<div class="container">

<!-- START PAGE -->
<div id="startPage">
  <!-- ðŸ”½ REPLACE LOGO URL BELOW -->
  <img src="https://instasize.com/p/08e8d14ccc9b78f6bc78b56e7bf0a576d95d09b5e1727ec551c3262ad96ee9ee" style="max-width:100%; margin-bottom:10px;">
  <h3>~ by CTP Falak Meer</h3>

  <input type="text" id="studentName" placeholder="Enter your name" style="width:100%; padding:10px; font-size:16px;">
  <button class="start-btn" onclick="startTest()">Start Test</button>
</div>

<!-- QUIZ PAGE -->
<div id="quizPage" class="hidden">
  <div id="timer">Time: <span id="time">10</span>s</div>
  <h3 id="question"></h3>
  <div id="options"></div>
  <p id="explanation"></p>
</div>

<!-- RESULT PAGE -->
<div id="resultPage" class="hidden">
  <h2>Today's Performance</h2>
  <p id="finalName"></p>
  <p id="finalScore"></p>
  <p id="finalAccuracy"></p>
</div>

<!-- ADMIN -->
<button class="admin-btn" onclick="adminMode()">Admin Mode</button>

<div id="adminPanel" class="hidden">
  <h3>Admin Question Editor (Exactly 5 Questions)</h3>
  <textarea id="adminInput"></textarea>
  <button class="start-btn" onclick="saveQuestions()">Save Questions</button>
</div>

</div>

<script>
const ADMIN_PASSWORD = "FalakPardiwala@786";
let questions = JSON.parse(localStorage.getItem("questions")) || [
  {
    "question": "What is the capital of India?",
    "options": ["Mumbai", "Delhi", "Kolkata", "Chennai"],
    "correct": 1,
    "explanation": "Delhi is the capital of India."
  }
];

let index = 0, correct = 0, wrong = 0, timer, timeLeft = 10;
let student = "";

function startTest() {
  student = document.getElementById("studentName").value.trim();
  if (!student) return alert("Please enter your name");
  document.getElementById("startPage").classList.add("hidden");
  document.getElementById("quizPage").classList.remove("hidden");
  loadQuestion();
}

function loadQuestion() {
  clearInterval(timer);
  timeLeft = 10;
  document.getElementById("time").textContent = timeLeft;

  const q = questions[index];
  document.getElementById("question").textContent = `Q${index + 1}. ${q.question}`;
  document.getElementById("explanation").textContent = "";

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  q.options.forEach((opt, i) => {
    const div = document.createElement("div");
    div.className = "option";
    div.textContent = opt;
    div.onclick = () => selectAnswer(div, i);
    optionsDiv.appendChild(div);
  });

  timer = setInterval(() => {
    timeLeft--;
    document.getElementById("time").textContent = timeLeft;
    if (timeLeft === 0) {
      clearInterval(timer);
      wrong++;
      showCorrect();
    }
  }, 1000);
}

function selectAnswer(el, i) {
  clearInterval(timer);
  const q = questions[index];
  const options = document.querySelectorAll(".option");

  options.forEach(o => o.onclick = null);

  if (i === q.correct) {
    el.classList.add("correct");
    correct++;
  } else {
    el.classList.add("wrong");
    options[q.correct].classList.add("correct");
    wrong++;
  }

  document.getElementById("explanation").textContent = q.explanation;
  setTimeout(nextQuestion, 2000);
}

function showCorrect() {
  const q = questions[index];
  document.querySelectorAll(".option")[q.correct].classList.add("correct");
  document.getElementById("explanation").textContent = q.explanation;
  setTimeout(nextQuestion, 2000);
}

function nextQuestion() {
  index++;
  if (index < questions.length) loadQuestion();
  else showResult();
}

function showResult() {
  document.getElementById("quizPage").classList.add("hidden");
  document.getElementById("resultPage").classList.remove("hidden");

  document.getElementById("finalName").textContent = `Name: ${student}`;
  document.getElementById("finalScore").textContent =
    `Correct: ${correct} | Incorrect: ${wrong}`;
  document.getElementById("finalAccuracy").textContent =
    `Accuracy: ${Math.round((correct / questions.length) * 100)}%`;
}

function adminMode() {
  const pass = prompt("Enter Admin Password");
  if (pass !== ADMIN_PASSWORD) return alert("Wrong password");
  document.getElementById("adminPanel").classList.toggle("hidden");
  document.getElementById("adminInput").value =
    JSON.stringify(questions, null, 2);
}

function saveQuestions() {
  try {
    const data = JSON.parse(document.getElementById("adminInput").value);
    if (data.length !== 5) return alert("Exactly 5 questions required");
    localStorage.setItem("questions", JSON.stringify(data));
    alert("Questions saved!");
  } catch {
    alert("Invalid JSON format");
  }
}
</script>

</body>
</html>
